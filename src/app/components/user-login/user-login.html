<div class="container mt-4">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <h2>User Login</h2>

            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

                <!-- Username (changed from email for FakeStore API) -->
                <div class="form-group mb-3">
                    <label for="username" class="form-label">Username *</label>
                    <input type="text" id="username" class="form-control" [class.is-valid]="isFieldValid('username')"
                        [class.is-invalid]="isFieldInvalid('username')" formControlName="username"
                        placeholder="Enter your username">

                    @if (isFieldInvalid('username')) {
                    <div class="invalid-feedback">
                        @if (getControl('username')?.errors?.['required']) {
                        <div>Username is required.</div>
                        }
                    </div>
                    }
                    @if (isFieldValid('username')) {
                    <div class="valid-feedback">
                        Valid username!
                    </div>
                    }

                    <!-- Demo credentials hint -->
                    <small class="form-text text-muted">
                        Demo: Use "mor_2314" as username and "83r5^_" as password
                    </small>
                </div>

                <!-- Password -->
                <div class="form-group mb-3">
                    <label for="password" class="form-label">Password *</label>
                    <input type="password" id="password" class="form-control"
                        [class.is-valid]="isFieldValid('password')" [class.is-invalid]="isFieldInvalid('password')"
                        formControlName="password" placeholder="Enter your password">

                    @if (isFieldInvalid('password')) {
                    <div class="invalid-feedback">
                        @if (getControl('password')?.errors?.['required']) {
                        <div>Password is required.</div>
                        }
                        @if (getControl('password')?.errors?.['minlength']) {
                        <div>Password must be at least 6 characters long.</div>
                        }
                    </div>
                    }
                    @if (isFieldValid('password')) {
                    <div class="valid-feedback">
                        Password looks good!
                    </div>
                    }
                </div>

                <!-- Buttons -->
                <div class="form-group mb-3">
                    <button type="submit" class="btn btn-primary me-2" [disabled]="isLoading">
                        @if (isLoading) {
                        <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                        Logging in...
                        } @else {
                        Login
                        }
                    </button>
                    <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset Form</button>
                </div>
            </form>

            <!-- Login Error Message -->
            @if (loginError) {
            <div class="alert alert-danger mt-4">
                {{ loginError }}
            </div>
            }


            <!-- Login Success Message -->
            @if (loginMessage) {
            <div class="alert alert-success mt-4">
                {{ loginMessage }}
            </div>
            }
        </div>
    </div>
</div>